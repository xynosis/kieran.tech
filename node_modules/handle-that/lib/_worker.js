var getItDone;

getItDone = require(process.argv[2]);

process.on("message", async({pieces, current, length}) => {
  var e;
  if (!pieces) {
    return process.send(0);
  }
  try {
    await getItDone(pieces, current, length);
  } catch (error) {
    e = error;
    console.error(e);
  }
  return process.send(pieces.length);
});

process.send(0);
